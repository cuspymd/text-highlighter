<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title data-i18n="pagesListTitle">Marks: Dashboard</title>
    <style>
      :root {
        /* Colors */
        --mark-accent: #007aff;
        --mark-accent-hover: #0056b3;
        --mark-bg: #ffffff;
        --mark-surface: #f5f5f7;
        --mark-surface-hover: #e8e8ed;
        --mark-text: #1d1d1f;
        --mark-text-secondary: #86868b;
        --mark-border: #d2d2d7;

        /* Shadows */
        --mark-shadow-s: 0 2px 8px rgba(0, 0, 0, 0.05);
        --mark-shadow-m: 0 4px 16px rgba(0, 0, 0, 0.08);
        --mark-shadow-l: 0 8px 32px rgba(0, 0, 0, 0.12);

        /* Radii */
        --mark-radius-s: 4px;
        --mark-radius-m: 8px;
        --mark-radius-l: 12px;

        /* Transitions */
        --mark-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --mark-bg: #121212;
          --mark-surface: #1c1c1e;
          --mark-surface-hover: #2c2c2e;
          --mark-text: #f5f5f7;
          --mark-text-secondary: #86868b;
          --mark-border: #38383a;
        }
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--mark-bg);
        color: var(--mark-text);
        margin: 0;
        padding: 40px;
        line-height: 1.5;
        max-width: 1000px;
        margin: 0 auto;
        transition: background-color 0.3s;
      }

      body.preload * {
        transition: none !important;
      }

      h1 {
        font-size: 32px;
        font-weight: 800;
        margin-bottom: 32px;
        letter-spacing: -0.02em;
      }

      .toolbar {
        margin-bottom: 32px;
        display: flex;
        align-items: center;
        gap: 16px;
        flex-wrap: wrap;
        background-color: var(--mark-surface);
        padding: 16px;
        border-radius: var(--mark-radius-l);
      }

      .search-section {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
        min-width: 280px;
        background-color: var(--mark-bg);
        padding: 4px 14px;
        border-radius: var(--mark-radius-m);
        border: 1px solid var(--mark-border);
        transition: var(--mark-transition);
      }

      .search-section:focus-within {
        border-color: var(--mark-accent);
        box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
      }

      .search-icon {
        color: var(--mark-text-secondary);
        display: flex;
        align-items: center;
      }

      .search-input {
        flex: 1;
        height: 36px;
        border: none;
        background: transparent;
        font-size: 15px;
        color: var(--mark-text);
        outline: none;
      }

      .action-buttons {
        display: flex;
        gap: 8px;
      }

      .icon-btn {
        width: 44px;
        height: 44px;
        border: 1px solid var(--mark-border);
        border-radius: var(--mark-radius-m);
        background-color: var(--mark-bg);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--mark-transition);
        color: var(--mark-text);
      }

      .icon-btn:hover {
        background-color: var(--mark-surface);
        border-color: var(--mark-text-secondary);
        transform: translateY(-1px);
      }

      .icon-btn:active {
        transform: translateY(0);
      }

      .icon-btn svg {
        width: 20px;
        height: 20px;
      }

      .btn-delete-all:hover {
        background-color: #fee8e8;
        color: #d93025;
        border-color: #fcd2d2;
      }

      .pages-list {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .page-card {
        padding: 24px;
        background-color: var(--mark-bg);
        border: 1px solid var(--mark-border);
        border-radius: var(--mark-radius-l);
        position: relative;
        transition: var(--mark-transition);
        box-shadow: var(--mark-shadow-s);
        display: flex;
        flex-direction: column;
        gap: 16px;
        cursor: pointer;
      }

      .page-card:hover {
        border-color: var(--mark-accent);
        box-shadow: var(--mark-shadow-m);
        transform: translateY(-2px);
      }

      .page-header {
        display: flex;
        gap: 14px;
        align-items: flex-start;
      }

      .page-favicon {
        width: 32px;
        height: 32px;
        background-color: var(--mark-surface);
        border-radius: 6px;
        flex-shrink: 0;
      }

      .page-title-group {
        flex: 1;
        min-width: 0;
      }

      .page-title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: var(--mark-text);
      }

      .page-url {
        color: var(--mark-text-secondary);
        font-size: 13px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .highlight-badge {
        background-color: var(--mark-accent);
        color: white;
        font-size: 12px;
        font-weight: 700;
        padding: 4px 10px;
        border-radius: 12px;
        flex-shrink: 0;
      }

      .page-preview {
        background-color: var(--mark-surface);
        padding: 16px;
        border-radius: var(--mark-radius-m);
        font-size: 14px;
        color: var(--mark-text);
        border-left: 4px solid var(--mark-accent);
        line-height: 1.6;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .page-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .page-meta {
        color: var(--mark-text-secondary);
        font-size: 12px;
        font-weight: 500;
      }

      .page-actions {
        display: flex;
        gap: 12px;
      }

      .btn {
        padding: 8px 16px;
        background-color: var(--mark-surface);
        border: 1px solid var(--mark-border);
        border-radius: var(--mark-radius-m);
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
        transition: var(--mark-transition);
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--mark-text);
      }

      .btn:hover {
        background-color: var(--mark-surface-hover);
        border-color: var(--mark-text-secondary);
      }

      .btn-view {
        background-color: var(--mark-accent);
        color: white;
        border: none;
      }

      .btn-view:hover {
        background-color: var(--mark-accent-hover);
      }

      .btn-delete {
        padding: 8px;
        color: var(--mark-text-secondary);
      }

      .btn-delete:hover {
        color: #d93025;
        background-color: #fee8e8;
        border-color: #fcd2d2;
      }

      .no-pages {
        padding: 60px;
        text-align: center;
        color: var(--mark-text-secondary);
        font-size: 16px;
        background-color: var(--mark-surface);
        border-radius: var(--mark-radius-l);
        border: 2px dashed var(--mark-border);
        display: none;
      }

      @media (max-width: 600px) {
        body {
          padding: 20px;
        }
        .toolbar {
          flex-direction: column;
          align-items: stretch;
        }
        .search-section {
          min-width: 0;
        }
      }

      /* Adjust button size in mobile portrait view */
      @media (max-width: 500px) {
        .btn {
          min-width: 0;
          padding: 6px 10px;
          font-size: 13px;
          flex: 1;
        }
        .page-card {
          padding: 20px;
        }
      }

      @media (pointer: coarse) {
        .icon-btn {
          width: 48px;
          height: 48px;
        }
        .btn {
          padding: 12px 20px;
          min-height: 44px;
        }
      }
    </style>
  </head>
  <body class="preload">
    <h1 data-i18n="pagesListTitle">Dashboard</h1>

    <div class="toolbar">
      <div class="search-section">
        <div class="search-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </div>
        <input id="search-input" class="search-input" type="text" data-i18n-placeholder="searchPlaceholder" placeholder="Search titles or highlights..." />
      </div>
      <div class="action-buttons">
        <button id="sort-btn" class="icon-btn" data-i18n-title="sortNewestFirst" title="Sort by time">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="15" y2="12"></line>
            <line x1="3" y1="18" x2="9" y2="18"></line>
          </svg>
        </button>
        <button id="refresh-btn" class="icon-btn" data-i18n-title="refresh" title="Refresh">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
          </svg>
        </button>
        <button id="export-all-btn" class="icon-btn" data-i18n-title="exportAllTooltip" title="Export">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </button>
        <button id="import-btn" class="icon-btn" data-i18n-title="importHighlightsTooltip" title="Import">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
        </button>
        <button id="delete-all-btn" class="icon-btn btn-delete-all" data-i18n-title="deleteAllPages" title="Delete All">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
          </svg>
        </button>
      </div>
      <input type="file" id="import-file" accept="application/json" style="display:none;" />
    </div>

    <div id="no-pages" class="no-pages" data-i18n="noPagesFound">
      No highlighted pages found.
    </div>

    <div id="pages-container" class="pages-list"></div>

    <script src="pages-list.js"></script>
  </body>
</html>
